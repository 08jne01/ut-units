
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="quantity.html">
      
      
        
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>ut-units</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ut-units" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="ut-units" class="md-header__button md-logo" aria-label="ut-units" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ut-units
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ut-units
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="ut-units" class="md-nav__button md-logo" aria-label="ut-units" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    ut-units
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    ut-units
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    ut-units
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-to-and-from-unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting to and from unit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-units" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gotchas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gotchas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symbols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Symbols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-new-units" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining New Units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-new-unit-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining New Unit Aliases
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-from-double-to-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting from double to float
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git-submodule" class="md-nav__link">
    <span class="md-ellipsis">
      
        git submodule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch-content" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch Content
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overhead" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overhead
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contributions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="quantity.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quantity
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="aliases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aliases
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="units.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Units
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functions
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduction
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-to-and-from-unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting to and from unit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-units" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gotchas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gotchas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symbols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Symbols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-new-units" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining New Units
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#defining-new-unit-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining New Unit Aliases
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converting-from-double-to-float" class="md-nav__link">
    <span class="md-ellipsis">
      
        Converting from double to float
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#git-submodule" class="md-nav__link">
    <span class="md-ellipsis">
      
        git submodule
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch-content" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fetch Content
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overhead" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overhead
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contributions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ut-units">ut-units</h1>
<h2 id="introduction">Introduction</h2>
<p>ut-units is a light weight single header only C++20 compile time unit and dimensional analysis system library. It is heavily inspire by the awesome <a href="https://github.com/mpusz/mp-units">mp-units</a>.</p>
<p>Like mp-units this library allows compile time validation and automatic conversions.</p>
<p>The primary motivation for this library to be lightweight: provide fast compile times and zero runtime overhead over using normal scalar types. ut-units also provide readible easy to understand compile time errors. The majority of unit related use cases are covered however if you have very specific requirements the <a href="https://github.com/mpusz/mp-units">mp-units</a> library is probably more well suited.</p>
<p>For the MSVC compiler the requirements for code generation to pass structs by register are extremely strict: ut-units makes sure that even on MSVC unit quantities are passed by register ensure <a href="#overhead">little overhead</a>.</p>
<p><a href="https://github.com/08jne01/ut-units">See the repository here</a>.</p>
<p><a href="https://08jne01.github.io/ut-units/">See the documentation here</a>.</p>
<h2 id="features">Features</h2>
<ul>
<li>Compile time checking</li>
<li>Little to no runtime overhead</li>
<li>Fast compile times</li>
<li>Easily readable compile-time errors</li>
<li>Easy to understand syntax</li>
<li>Easily extendible with further units</li>
</ul>
<h2 id="examples">Examples</h2>
<h3 id="converting-to-and-from-unit">Converting to and from unit</h3>
<p>To convert to a unit from a floating point simply multiply it by the corresponding unit.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">speed</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">meter_per_second</span><span class="p">;</span>
</span></code></pre></div>
<p>To convert from a unit back to a floating point the <code>in</code> function can be used with a compatible unit.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">length</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">metre</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kt">double</span><span class="w"> </span><span class="n">length_in_ft_as_double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">.</span><span class="n">in</span><span class="p">(</span><span class="n">ut</span><span class="o">::</span><span class="n">foot</span><span class="p">);</span>
</span></code></pre></div>
<p>This makes it easy to interface with existing code that does not use units. See the <a href="quantity.html">quantity page</a> for more.</p>
<h3 id="using-units">Using Units</h3>
<p>All the usual operators you would expect are overloaded, operators are appropriately constrained. For example you cannot add metre to a second.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">time</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">dt</span><span class="p">;</span><span class="w"> </span><span class="c1">//assume this has a valid value</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">ut</span><span class="o">::</span><span class="n">angle</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">angle</span><span class="p">;</span><span class="w"> </span><span class="c1">// assume this is some variable we wish to change</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="n">ut</span><span class="o">::</span><span class="n">angular_rate</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">drift_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">degree</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">hour</span><span class="p">;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">angle</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">dt</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">drift_rate</span><span class="p">;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">cosa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cos</span><span class="p">(</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// dimensionless are implicitly converted to corresponding floating point</span>
</span></code></pre></div>
<h3 id="gotchas">Gotchas</h3>
<p>Care must be taken when creating some quantities as incorrect brackets can lead to unexpected results. This is because operator presedence still applies. Consider the example below</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">angular_rate</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rate</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">degree</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">minute</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">ut</span><span class="o">::</span><span class="n">angular_rate</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rate</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">degree</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">minute</span><span class="p">;</span><span class="w"> </span><span class="c1">// this is the same as 1.0 * ( ut::degree / 2.0) * ut::minute and fails to compile</span>
</span></code></pre></div>
<h3 id="symbols">Symbols</h3>
<p>Short hand symbols are provided for convenient use in the sym namespace.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">energy</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sym</span><span class="o">::</span><span class="n">kWH</span>
</span></code></pre></div>
<p>See the <a href="units.html">units page</a> for more.</p>
<h3 id="defining-new-units">Defining New Units</h3>
<p>Units can be can create by simply combining existing units. Units are defined using the <code>double</code> type so they can be easily converted to <code>float</code> with the most accurate precision.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">qty</span><span class="w"> </span><span class="n">newton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">kilogram</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">metre</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">second</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">second</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">qty</span><span class="w"> </span><span class="n">nautical_mile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1852.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">metre</span><span class="p">;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">qty</span><span class="w"> </span><span class="n">knot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">nautical_mile</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">hour</span><span class="p">;</span>
</span></code></pre></div>
<p>See the <a href="units.html">units page</a> for more.</p>
<h3 id="defining-new-unit-aliases">Defining New Unit Aliases</h3>
<p>Unit aliases are names for categories of unit which share the same dimension</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">floating_point</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">qty</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="k">decltype</span><span class="p">(</span><span class="n">ut</span><span class="o">::</span><span class="n">metre_per_second</span><span class="p">)</span><span class="o">::</span><span class="n">dimensions</span><span class="o">&gt;</span><span class="p">;</span>
</span></code></pre></div>
<p>See the <a href="aliases.html">aliases page</a> for more.</p>
<h3 id="converting-from-double-to-float">Converting from double to float</h3>
<p>Units are defined with the <code>double</code> type but can be easily converted <code>float</code>.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">ut</span><span class="o">::</span><span class="n">force</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100.0f</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ut</span><span class="o">::</span><span class="n">newton</span><span class="p">.</span><span class="n">f</span><span class="p">();</span>
</span></code></pre></div>
<h2 id="install">Install</h2>
<p>This is a single header library so you can just drop the <a href="https://github.com/08jne01/ut-units/blob/main/include/ut-units.h">include/ut-units.h</a> file in your project.</p>
<p>Alternatively if you wish to use CMake, ut-units provides an interface library. There are two main methods to include this.</p>
<h3 id="git-submodule">git submodule</h3>
<p><code>git submodule add https://github.com/08jne01/ut-units.git ext/ut-units</code></p>
<p>where ext here is the path to your dependencies folder. Then in your CMakeLists.txt simply add</p>
<div class="language-CMake highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}/ext/ut-units&quot;</span><span class="p">)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">&lt;your-target&gt;</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">ut-units</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="fetch-content">Fetch Content</h3>
<div class="language-cmake highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nb">FetchContent_Declare</span><span class="p">(</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="s">ut-units</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s2">&quot;https://github.com/08jne01/ut-units.git&quot;</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="s">GIT_TAG</span><span class="w">        </span><span class="s">&lt;git</span><span class="w"> </span><span class="s">revision</span><span class="w"> </span><span class="s">of</span><span class="w"> </span><span class="s">choice&gt;</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">)</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">ut-units</span><span class="p">)</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">&lt;your-target&gt;</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">ut-units</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="overhead">Overhead</h2>
<p>Since we want this to be as close to a "zero cost abstraction" as possible it is important we ensure that the generated code is the same or similar to the equivalent code written as doubles. This is mostly the case when it comes to gcc and clang compilers however the MSVC compiler struggles with this when it comes to passing these units by value.</p>
<p>It is expected a struct of 8 bytes be passed in a register and in the best case passed in the xmm registers so it can be used immediately. However the MSVC compiler does not pass any struct in registers if the data is not a <a href="https://learn.microsoft.com/en-us/cpp/cpp/trivial-standard-layout-and-pod-types?view=msvc-170">plain old data type</a> <strong>and</strong> the struct does not inherit from anything. The second point is the exact reason that the fundemental type ut::qty does not inherit from anything.</p>
<p>Considering all this ut::qty is able to be passed by value in the registers on MSVC however it will use 1 additional instruction to move it from the integer register to an xmm floating pointer register. Moving from the integer register to floating point register is much prefer to behaviour of passing by reference and the cost that incurs with literal types. clang and gcc pass in xmm registers as they seem to understand that ut::qty is just a floating point number.</p>
<p>The original purpose for this library was to be built with MSVC so much care has been taken to ensure it is optimal as possible for this compiler.</p>
<h2 id="contributions">Contributions</h2>
<p>Contributions are welcome. There are several ways to contribute:</p>
<ul>
<li>Adding new units and symbols</li>
<li>Adding new aliases</li>
<li>Making issues for any bugs discovered.</li>
<li>Fixing bugs</li>
<li>Adding tests</li>
</ul>
<p>There are no specific requirements for contributing but for code contributions please match the general style and provide comments with sources for any significant assertions (definition of specific unit for example).</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": [], "search": "assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>